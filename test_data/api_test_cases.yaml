# 用户相关测试用例
user_test_cases:
  # 创建用户测试用例
  create_user:
    - test_id: "TC_USER_001"
      test_name: "创建用户-有效数据"
      description: "使用有效的用户数据创建用户"
      method: "POST"
      endpoint: "/users"
      request:
        name: "John Doe"
        email: "john.doe@example.com"
        gender: "male"
        status: "active"
      expected:
        status_code: 201
        response_schema:
          id: int
          name: str
          email: str
        response_contains:
          name: "John Doe"
          email: "john.doe@example.com"
      tags: ["smoke", "regression"]
      priority: "high"

    - test_id: "TC_USER_002"
      test_name: "创建用户-重复邮箱"
      description: "使用已存在的邮箱创建用户"
      method: "POST"
      endpoint: "/users"
      request:
        name: "Duplicate User"
        email: "existing@example.com"
        gender: "female"
        status: "inactive"
      expected:
        status_code: 400
        response_contains:
          error: "Email already exists"
      tags: ["regression"]
      priority: "medium"

    - test_id: "TC_USER_003"
      test_name: "创建用户-缺少必填字段"
      description: "缺少必填字段name"
      method: "POST"
      endpoint: "/users"
      request:
        email: "test@example.com"
        gender: "male"
        status: "active"
      expected:
        status_code: 422
        response_contains:
          field: "name"
          message: "can't be blank"
      tags: ["negative"]
      priority: "medium"

  # 获取用户测试用例
  get_users:
    - test_id: "TC_USER_004"
      test_name: "获取用户列表"
      description: "获取所有用户列表"
      method: "GET"
      endpoint: "/users"
      params:
        page: 1
        per_page: 10
      expected:
        status_code: 200
        response_is_list: true
        min_items: 1
      tags: ["smoke"]
      priority: "high"

    - test_id: "TC_USER_005"
      test_name: "获取单个用户"
      description: "通过ID获取单个用户信息"
      method: "GET"
      endpoint: "/users/1"
      expected:
        status_code: 200
        response_contains:
          id: 1
        response_schema:
          id: int
          name: str
          email: str
      tags: ["regression"]
      priority: "medium"
      setup: "需要先创建用户"

  # 更新用户测试用例
  update_user:
    - test_id: "TC_USER_006"
      test_name: "更新用户信息"
      description: "更新现有用户的信息"
      method: "PUT"
      endpoint: "/users/1"
      request:
        name: "Updated Name"
        email: "updated@example.com"
        status: "active"
      expected:
        status_code: 200
        response_contains:
          name: "Updated Name"
          email: "updated@example.com"
      tags: ["regression"]
      priority: "medium"
      dependencies: ["TC_USER_001"]

    - test_id: "TC_USER_007"
      test_name: "部分更新用户"
      description: "只更新用户的名称"
      method: "PATCH"
      endpoint: "/users/1"
      request:
        name: "Partially Updated"
      expected:
        status_code: 200
        response_contains:
          name: "Partially Updated"
      tags: ["regression"]
      priority: "low"

# 产品相关测试用例
product_test_cases:
  create_product:
    - test_id: "TC_PROD_001"
      test_name: "创建产品-有效数据"
      description: "创建新产品"
      method: "POST"
      endpoint: "/products"
      request:
        title: "iPhone 15 Pro"
        price: 999.99
        description: "Latest iPhone model"
        category: "electronics"
        stock: 100
      expected:
        status_code: 201
        response_contains:
          title: "iPhone 15 Pro"
          category: "electronics"
      tags: ["smoke"]
      priority: "high"

# 登录认证测试用例
auth_test_cases:
  login:
    - test_id: "TC_AUTH_001"
      test_name: "登录-有效凭证"
      description: "使用正确的用户名密码登录"
      method: "POST"
      endpoint: "/auth/login"
      request:
        username: "admin"
        password: "password123"
      expected:
        status_code: 200
        response_contains:
          token: str
          expires_in: 3600
      tags: ["smoke", "authentication"]
      priority: "critical"

    - test_id: "TC_AUTH_002"
      test_name: "登录-无效密码"
      description: "使用错误密码登录"
      method: "POST"
      endpoint: "/auth/login"
      request:
        username: "admin"
        password: "wrongpassword"
      expected:
        status_code: 401
        response_contains:
          error: "Invalid credentials"
      tags: ["negative", "authentication"]
      priority: "medium"